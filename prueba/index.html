<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <!-- <meta name="csrf-token" content="{{ csrf_token() }}" /> -->
    <title>Document</title>
  </head>
  <body>
    <script>
      console.log("get cookie");
        window.a = ""
        $.ajax({
          type: "GET",
          url: "http://127.0.0.1:8001/api/csrf-cookie",
        }).done((data) => {
            console.log(data);
        }).fail(function (XMLHttpRequest, textStatus, errorThrown) {
            if (console && console.log) {
              console.log("La solicitud ha fallado: " + textStatus);
              console.log(XMLHttpRequest);
              console.log(errorThrown);
            }
          });
      function list() {
        // axios.post('http://127.0.0.1:8000/api/fruit/list').then(res => {
        //     // console.log(res.data)
        //     // window.location.reload(true)
        // })
        
        
        $.ajax({
        //   data: {
        //     id: $(this)[0].id,
        //     x: xPos,
        //     y: yPos,
        //   },
          type: "GET",
          headers: {
            "Authorization": "Bearer "+ window.a,
          },
          url: "http://127.0.0.1:8000/api/fruit/list",
        })
          .done((data) => {
            console.log(data);
          })
          .fail(function (XMLHttpRequest, textStatus, errorThrown) {
            if (console && console.log) {
              console.log("La solicitud ha fallado: " + textStatus);
              console.log(XMLHttpRequest);
              console.log(errorThrown);
            }
          });
      }
      function login() {
        $.ajax({
          data: {
            email: "a@a.aa",
            password: "a",
            
          },
          type: "POST",
          headers: {
            "X-CSRF-TOKEN": document.cookie,
          },
          xhrFields: {
             withCredentials: true
          },
          url: "http://127.0.0.1:8001/api/login",
        })
          .done((data) => {
            console.log(data);
          })
          .fail(function (XMLHttpRequest, textStatus, errorThrown) {
            if (console && console.log) {
              console.log("La solicitud ha fallado: " + textStatus);
              console.log(XMLHttpRequest);
              console.log(errorThrown);
            }
          });
      }

      function request(){  
        $.ajax({
        data: {
            "addressee_name":  "a"
        },
        xhrFields: {
          withCredentials: true
        },
        type: "PUT",
        // dataType: "json",
        headers: {
            // 'X-CSRF-TOKEN': "",
            'Authorization': "Bearer 9|k7aqDuWrlVqwqBdRJxS4GOu6LMeY3Dq3CAfCZdr8"
        },
        url: "http://localhost:8001/api/user/sendrequest",
      }).done((data) => {
          console.log(data);
          if (data.success) {
            console.log("-----------------------")
            console.log(data);
            // showNotification("PeticiÃ³n de amistad enviada a "+friend, "#49EE63")
            // this.$root.user.notifications.push(friend);
            // this.notificationunsread = true;
            // sessionStorage.setItem("session", JSON.stringify(this.$root.user));
          }
        }).fail(function (textStatus) {
            if (console && console.log) {
            console.log("La solicitud ha fallado: " + textStatus);
            console.log(textStatus);
            }
        });
      }

      function listrequest() {
        console.log("trato de actualizar peticiones")
        $.ajax({
          xhrFields: {
              withCredentials: true
          },
          type: "GET",
          // dataType: "json",
          headers: {
              // 'X-CSRF-TOKEN': "",
              'Authorization': "Bearer "+ window.token
          },
          url: "http://127.0.0.1:8000/api/user/listrequests",
        }).done((data) => {
                console.log(data.data.requests);
        }).fail(function (XMLHttpRequest, textStatus, errorThrown) {
            if (console && console.log) {
                console.log("La solicitud ha fallado: " + textStatus);
                console.log(XMLHttpRequest);
                console.log(errorThrown);
            }
        });
      }

      function register() {
        $.ajax({
          data: {
            name: "a",
          email: "a@a.aa",
          password: "a",
          confirm_password: "a"
            
          },
          xhrFields: {
              withCredentials: true
          },
          type: "POST",
          // dataType: "json",
          headers: {
              // 'X-CSRF-TOKEN': "",
              'Authorization': "Bearer "+ window.token
          },
          url: "http://127.0.0.1:8001/api/register",
        }).done((data) => {
                console.log(data.data.requests);
        }).fail(function (XMLHttpRequest, textStatus, errorThrown) {
            if (console && console.log) {
                console.log("La solicitud ha fallado: " + textStatus);
                console.log(XMLHttpRequest);
                console.log(errorThrown);
            }
        });
    }
   
   </script>

    <!-- <form method="POST" action="http://127.0.0.1:8000/api/login">
      <input
        id="email"
        type="email"
        name="email"
        value=""
        required
        autocomplete="email"
        autofocus
      />
      <input
        id="password"
        type="password"
        name="password"
        required
        autocomplete="current-password"
      />
      <button type="submit">Login</button>
    </form> -->
    <div onclick="a()">aaaaaa</div>
  </body>
</html>
